---
title: ADS-B Basics
date: 2022-01-19 18:00:00
categories: [Wireless Communication]
tags: [ads-b]
---
# ADS-B 基础
## 简介 Introduction 
最近做了一些 ADS-B 信号的研究, 正好在这里记录分享一下. ADS-B, 全称是广播式自动相关监视(Automatic Dependent Surveillance - Broadcast), 一眼就知道这是干什么的(才怪). 通常来讲, ADS-B 信号指的是从民航飞机上发射的带有位置, 高度, 速度, 航向, 识别号等信息的广播信号. 作用是将自己的航行信息通知周围其他飞机和地面站, 便于监控, 防止发生事故.

Recently, I was doing some research on the ADS-B signal, and I'd like to take this opportunity to organize and share my results. ADS-B stands for Automatic Dependent Surveillance - Broadcast, which is self-explanatory. The ADS-B is a type of broadcast signal from many civil aircraft that carries its location, altitude, speed, heading, identification, etc. The purpose is to prevent accidents by exchanging information with other aircraft and ground stations.

有趣的地方在于这个信号的是公开未加密的, 而且接收和解调非常容易, 一旦将信息解码出来非常有成就感. 所以做一个 ADS-B 接收机几乎是入门软件无线电 (SDR) 的必修课, 仅次于 FM 收音机. 对于接收机的问题, 我在下一篇再写, 这里先从无线通信角度聊一下 ADS-B 信号本身. 

The interesting part is that this signal is not encrypted, and can be easily received and demodulated. One can feel great achievement once decode it. As such, building an ASD-B receiver is like the second must-to-do project for software defined radio (SDR) enthusiasts. Of course, the first project is always an FM radio. As to the ADS-B receiver, I will talk about it in the next blog. Let's first take a look at the signal itself from the wireless communication perspective.

## 参数与调制方式 Parameters and the Modulation scheme

Matlab 的[帮助文档](https://www.mathworks.com/help/supportpkg/rtlsdrradio/ug/airplane-tracking-using-ads-b-signals.html)中对 ADS-B 信号参数总结的很好 (Matlab 的帮助文档很多都非常棒). 这里我就直接粘贴一部分过来.

Matlab has a nice [documentation](https://www.mathworks.com/help/supportpkg/rtlsdrradio/ug/airplane-tracking-using-ads-b-signals.html) on the ADS-B signals (Matlab has a lot of nicely written documentation!). So I will copy and paste some here.

Mode-S (consider it as ADS-B) has the following properties:

- Transmit Frequency: 1090 MHz
- Modulation: Pulse Position Modulation
- Data Rate: 1 Mbit/s
- Short Squitter Length: 56 microseconds
- Extended Squitter Length: 112 microseconds

Short squitter messages contain the following information:

- Downlink Format (DF)
- Capability (CA)
- Aircraft ID (Unique 24-bit sequence)
- CRC Checksum

Extended squitter (ADS-B) messages contain all the information in a short squitter and one of these:

- Altitude
- Position
- Heading
- Horizontal and Vertical Velocity

从物理层角度来说, ADS-B 信号的中心频率是 1090 MHz, 占用 1 MHz 带宽, 使用脉冲位置调制 (PPM). 这种调制方式比较少见, 但是其实很简单. 如下图所示, 每一个码元包含前后两个码片, 一个能量高, 另一个能量低. 如果前一个能量高而后一个能量低, 这个码元代表 1. 反之, 如果先是低能量码片, 然后是高能量, 那么这个码元代表 0.

In the physical layer, the ADS-B signal has a center frequency of 1090 MHz and occupies 1 MHz bandwidth. The Pulse Position Modulation (PPM) is not widely used, but it is very simple. As shown in the figure below, each symbol has two chips, where one has a high value and the other has a low value. If the first chip is high followed by low chip, this corresponds to the symbol being a 1. Alternatively, if the first chip is low followed by high chip, then the symbol is 0. 

![ADS-b packet and PPM](/assets/img/posts/ads-b_PPM.png)

## 帧结构 Frame structure
从上图可以看到, 一个 ADS-B 帧有 120 微秒长, 其中前 8 微秒是导波用于同步, 接着是 122 微秒 (122 bits) 的数据. 下面简单给出数据帧结构, 更详细内容可以在[这里](https://mode-s.org/decode/content/ads-b/1-basics.html)找到.
顺便说一句, 这个作者同时还作有[基于 Python 的 ADS-B 信号解码工具](https://github.com/junzis/pyModeS), 建议直接拿来用, 而不要重复造轮子来解析 ADS-B 信号.

From the figure above, each ADS-B frame is 10 us long. The first 8 us is the preamble that can be used for synchronization. The following is the 122 us long data block which contains 122 bits data. I will briefly give the frame structure, and you can find more details [here](https://mode-s.org/decode/content/ads-b/1-basics.html).
BTW, this author also wrote a nice [Python decoder for ADS-B signals](https://github.com/junzis/pyModeS). Import it, so you don't need to build your own wheel to decode the ADS-B signals.


| Bit No. |bits  | Abbreviation | Information              |
|:--------|:-----|:-------------|:-----------              |
| 1-5     | 5    | DF           |Downlink Format           |
| 6-8     | 3    | CA           |Transponder capability    |
| 9–32    | 24   | ICAO         |ICAO aircraft address     |
| 33–88   | 56   | ME           |Message, extended squitter|
| (33–37) | (56) | (TC))        |(Type code)               |
| 89–112  | 24   | PI           |Parity/Interrogator ID    |

To be continued in the next post.