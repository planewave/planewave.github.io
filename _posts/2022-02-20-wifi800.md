---
title: Why do I receive a Wi-Fi signal at 810 MHz?
date: 2022-02-20 17:00:00
categories: [Wireless Communication, SDR]
tags: [usrp, wi-fi, fourier analysis]
---

A few months ago, when I was playing around with a [USRP B200mini](https://www.ettus.com/all-products/usrp-b200mini/) and [GQRX](https://gqrx.dk) (for spectrum visualization), I found a mysterious signal at around 810 MHz.
It has 20 MHz bandwidth with a null DC.
Pretty sure it is a Wi-Fi signal judging from the spectrogram, except that the center frequency is significantly off.

So what exactly is it?
I couldn't find the answer on the Internet, and it took me a long time to figure it out by myself.
So I going to do a retrospective analysis in this post.

## Troubleshooting

Below is the list of possible reasons:

* The signal exists at this frequency.
* Hardware issue with the USRP.
* Software issue with the GQRX.

First, I used an [HackRF One](https://greatscottgadgets.com/hackrf/one/) to check the signals at the same band, but nothing is there.
This indicates that there is no Wi-Fi signal at 810 MHz, and it mack sense.
Also, it is not the GQRX's issue.
So there must be something not right with the USRP.

![hackrf frontend](/assets/img/posts/hackrf_front.png)

Before going further, let's take a look at the frontend of Hackrf One.
In the lower-left, there are 3 filters, and the first lowpass filter can block the interference above 2.3 GHz when looking at signals at 810 MHz.
There is no such filter in the frontend of my USRP.
This may explain the observation, but why the Wi-Fi signal is mixed into 810 MHz in the first place?

## Direct-conversion receiver

In fact, without the lowpass filter in the frontend, the HackRF One will receive interference too.
To understand this, we must go back to the principle of the Direct-conversion or zero IF architecture, which is the most commonly used RF transceiver architecture.
Analog Device has a nice [technical article](https://www.analog.com/en/technical-articles/a-review-of-wideband-rf-receiver-architecture-options.html) talking about the RF receiver architecture.

![Direct-conversion receiver](/assets/img/posts/zif.jpg)

As shown in the figure, the LO (Local Oscillator) frequency is set equal to the frequency of interest, so the received signal is directly converted to the baseband I (inphase) and Q (quadrature) signals.
In other words, the RF signal is multiplied by the LO, so that the signal at the frequency of interest is shifted to zero frequency.

## Harmonics

But the reference signal generated by the LO is not a pure sine wave, but more like a square wave.
When there is a square wave, there are harmonics.
That means except for the 810 MHz fundamental frequency, there should be 1620 MHz, *2430 MHz*, 3240 MHz ... components generated by the LO.
So it is the *third-order harmonic* of the LO that brings the 2.4 GHz Wi-Fi signal down to the signal at 810 MH.

If so, I should get the Wi-Fi signal at 1220 MHz too, right? No.
According to the Fourier analysis, if an infinite square wave has a duty cycle of 50%, there are *odd-order* harmonics only.
And yes, I did see the Wi-Fi signal again at 490 MHz, which corresponds to the fifth-harmonic of LO.

That is all for today.
Thanks for reading.
